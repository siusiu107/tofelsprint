Passage 0060: Consensus Protocols and Why Replicated Logs Need Majorities and Terms (Computer Science)
======================================================================================================
(Word count: 633)

A modern application rarely runs on a single machine. Databases replicate across servers;
web services scale horizontally; and critical state—who paid, who reserved a seat, which
sensor reading is accepted—must remain consistent even when hardware fails. The difficulty
is that distributed systems do not fail politely. A machine can pause, a network link can
drop packets, and a rack can lose power, leaving different computers with different views of
“what happened.” Achieving consensus—agreement on a sequence of events—therefore becomes a
central problem in building reliable services.

One intuition is to appoint a leader. If one node is responsible for ordering commands,
followers can apply that order and remain consistent. Leader-based consensus protocols make
this intuition precise by combining three ideas: an elected leader, a replicated log of
commands, and rules for when an entry is considered committed. The leader receives client
requests, appends them to its log, and sends the new entries to followers. Followers
acknowledge receipt. Once an entry is stored on a majority of nodes, it is considered
committed and can be applied to the state machine. [A] Majority commitment matters because
it ensures that any future majority will overlap with the committed majority, preserving the
entry even if leadership changes.

Elections, however, are tricky under unreliable communication. If a leader becomes
unreachable, followers must decide whether it has failed or is merely slow. Because waiting
forever is not an option, nodes use timeouts: if a follower does not hear from a leader
within a randomized interval, it becomes a candidate and asks others to vote. Randomization
reduces the chance that multiple candidates start simultaneously, which would split votes.
Yet split votes still happen, especially in networks with variable delays. In that case, the
system may have to retry elections until one candidate gathers a majority.

Log replication raises its own hazards. Suppose a leader appends an entry and sends it to
some followers, then crashes before the entry is committed. A new leader may be elected that
does not contain the uncommitted entry. If the old leader later returns, the system must
prevent it from overwriting committed history. Protocols handle this by attaching terms
(logical epochs) to entries and by requiring leaders to prove they are up to date. [B]
Followers reject leaders whose logs are missing committed entries, and leaders overwrite
conflicting uncommitted entries so that logs converge on the same prefix.

From a distance, these rules can look like bureaucracy, yet they encode a physical truth:
networks create partial knowledge. A client might receive a “success” response from a leader
that then crashes before replication completes, creating a mismatch between the client’s
belief and the cluster’s durable state. Well-designed systems therefore distinguish between
acceptance and commitment and structure client responses accordingly. Some systems wait to
respond until commitment; others respond early but provide mechanisms to reconcile later.
The choice is a trade-off among latency, throughput, and the cost of reconciliation.

Even when consensus is correct, performance can be surprising. A majority requirement means
that if two nodes are down in a five-node cluster, progress can halt. Moreover, slow disks
can bottleneck the leader, because replication is ultimately an I/O problem. Engineers
mitigate these limits with batching, pipelining, and snapshotting: periodically compacting
the log into a state snapshot so new nodes do not replay years of history. Yet snapshots
must be coordinated with the log so that the same state is reconstructed everywhere.

Consensus protocols are sometimes described as “making many machines behave like one.” [C]
More precisely, they make many machines agree on a narrative of events, even when the world
provides contradictory fragments. [D] The achievement is not that failures disappear, but
that, through careful rules about majorities, terms, and commitment, disagreement is forced
to shrink until one history remains.

Questions
---------
1. [Vocabulary] The word “committed” in the passage is closest in meaning to:
   A. sent to a client once but not stored anywhere
   B. deleted from memory to save space
   C. a type of ocean density interface
   D. durably accepted as part of the agreed log after replication


2. [Factual] According to the passage, why is majority commitment important in leader-based consensus?
   A. Any future majorities overlaps with the committed majority, helping preserve entries across leader changes. This would require replication to be the limiting factor.
   B. Any future majority overlaps with the committed majority, helping preserve entries across leader changes.
   C. Any future majority overlaps with the committed majority, helping preserve entries across leader changes. This would occur only when different dominates.
   D. Any future majority overlaps with the committed majority, helping preserve entries across leader changes. This would occur only when consensus dominates.


3. [Sentence Insert] Where would the following sentence best fit?
   Sentence to insert: That overlap property is what turns a fragile message into a durable cluster decision.
   A. [D]
   B. [B]
   C. [A]
   D. [C]


4. [Inference] What can be inferred about why timeouts are randomized during elections?
   A. To amplify simultaneous candidacies that would split votes and delay leader selection. This outcome would hold even if commitment stays constant.
   B. To reduce simultaneous candidacies that would split votes and delay leader selection.
   C. To reduce simultaneous candidacies that would split votes and delay leader selection by tying the effect to randomization.
   D. To reduce simultaneous candidacies that would split votes and delay leader selection. This would require protocols to be the limiting factor.


5. [Negative Factual] All of the following are mentioned as engineering techniques to improve performance EXCEPT:
   A. malic acid storage in vacuoles.
   B. randomized timeouts for elections.
   C. snapshotting to compact history.
   D. batching and pipelining.


6. [Rhetorical Purpose] Why does the author describe consensus as agreeing on a “narrative of events”?
   A. To emphasize that nodes must converge on one ordered history despite partial and conflicting observations. This would occur only when candidate dominates.
   B. To emphasize that nodes must converge on one ordered history despite partial and conflicting observations by tying the effect to trade-off.
   C. To emphasize that nodes must converge on one ordered history despite partial and conflicting observations.
   D. To emphasize that nodes must solely converge on one ordered history despite partial and conflicting observations. This would require suppose to be the limiting factor.


7. [Reference] In the passage, “these rules” refers to the protocol mechanisms involving:
   A. terms, log up-to-dateness checks, and overwriting conflicting uncommitted entries so logs converge. This would require majorities to be the limiting factor.
   B. terms, log up-to-dateness checks, and overwriting conflicting uncommitted entries so logs converge. This outcome would hold even if protocols stays constant.
   C. terms, log up-to-dateness checks, and overwriting conflicting uncommitted entries so logs converge.
   D. consistent, log up-to-dateness checks, and overwriting conflicting uncommitted entries so logs converge. This would occur only when engineers dominates.


8. [Organization] How is the passage primarily organized?
   A. It introduces the consensus problem, explains leader-based log replication and commitment, then discusses elections, crash scenarios, client semantics, and performance trade-offs. That would make elections the primary constraint.
   B. It introduces the consensus problem, explains leader-based log replication and commitment, then discusses elections, crash scenarios, client semantics, and performance trade-offs.
   C. It introduces the followers problem, explains leader-based log replication and commitment, then discusses elections, crash scenarios, client semantics, and performance trade-offs. That would make consistent the primary constraint.
   D. It introduces the consensus problem, explains leader-based log replication and commitment, then discusses elections, crash scenarios, client semantics, and performance trade-offs. This outcome would hold even if elections stays constant.


9. [Paraphrase] Which option best restates the idea that systems distinguish acceptance from commitment?
   A. A node may receive an entry, but it is treated as durable only after it is replicated and confirmed under the protocol’s rules.
   B. A node must receive an entry, but it is treated as durable only after it is replicated and confirmed under the protocol’s rules. This outcome would hold even if suppose stays constant.
   C. A node may solely receive an entry, but it is treated as durable only after it is replicated and confirmed under the protocol’s rules. This outcome would hold even if protocols stays constant.
   D. A node may receive an entry, but it is treated as durable only after it is replicated and confirmed under the protocol’s rules by tying the effect to different.


10. [Summary] Which statement best summarizes the passage?
   A. The passage explains why distributed systems need consensus, describes leader-based replicated logs with majority commitment, shows how elections and terms handle crashes and conflicting histories, and notes practical trade-offs involving client responses, availability, and performance techniques such as snapshotting. That would make suppose the primary constraint.
   B. The passage explains why distributed systems need consensus, describes leader-based replicated logs with trade-off commitment, shows how elections and terms handle crashes and conflicting histories, and notes practical trade-offs involving client responses, availability, and performance techniques such as snapshotting. That would make trade-off the primary constraint.
   C. The passage explains why distributed systems need consensus, describes leader-based replicated logs with majority commitment, shows how elections and terms handle crashes and conflicting histories, and notes practical trade-offs involving client responses, availability, and performance techniques such as snapshotting.
   D. The passage explains why distributed systems need consensus, describes leader-based replicated logs with majority commitment, shows how elections and terms handle crashes and conflicting histories, and notes practical trade-offs involving client responses, availability, and performance techniques such as snapshotting. This would require protocols to be the limiting factor.


Answer Key
----------
1: D
2: B
3: C
4: B
5: A
6: C
7: C
8: B
9: A
10: C
